<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:RTXLauncher.Avalonia.ViewModels"
             x:Class="RTXLauncher.Avalonia.Views.SettingsView"
             x:DataType="vm:SettingsViewModel">

	<!-- This is the content you copied from the TabItem -->
	<ScrollViewer>
		<StackPanel Spacing="10" Margin="10">
			<!-- "Resolution" GroupBox -->
			<Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10">
				<Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="Auto,*">
					<TextBlock Text="Resolution" FontWeight="Bold" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,0,10"/>
					<ComboBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
							  ItemsSource="{Binding Resolutions}"
							  SelectedItem="{Binding SelectedResolution}"/>
					<CheckBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,10,0,0"
							  Content="Use Custom Resolution"
							  IsChecked="{Binding UseCustomResolution}"/>
					<Grid Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,10,0,0"
						  ColumnDefinitions="Auto,Auto,Auto"
						  IsEnabled="{Binding UseCustomResolution}">
						<NumericUpDown Grid.Column="0" Value="{Binding Width}" Minimum="0" Maximum="100000"/>
						<TextBlock Grid.Column="1" Text="Ã—" VerticalAlignment="Center" Margin="5,0"/>
						<NumericUpDown Grid.Column="2" Value="{Binding Height}" Minimum="0" Maximum="100000"/>
					</Grid>
				</Grid>
			</Border>
			<Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10">
				<Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="Auto,*">
					<TextBlock Text="Garry's Mod" FontWeight="Bold" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,0,10"/>
				
					<CheckBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
							  Content="Load Workshop Addons"
							  IsChecked="{Binding LoadWorkshopAddons}"/>
				</Grid>
			</Border>
		
			<!-- Linux-specific settings (only visible on Linux) -->
			<Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10" 
					IsVisible="{Binding IsLinux}">
				<Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto" ColumnDefinitions="Auto,*,Auto">
					<TextBlock Text="Linux Settings" FontWeight="Bold" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Margin="0,0,0,15"/>
				
					<!-- Proton Version Selection -->
					<TextBlock Text="Proton Version:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,10,0"/>
					<ComboBox Grid.Row="1" Grid.Column="1" 
							  ItemsSource="{Binding ProtonBuildLabels}" 
							  SelectedItem="{Binding SelectedProtonBuild}"
							  HorizontalAlignment="Stretch"
							  Margin="0,0,5,0"/>
					<Button Grid.Row="1" Grid.Column="2" Content="Refresh" 
							Command="{Binding RefreshProtonBuildsCommand}"
							Padding="8,4"/>
				
								<!-- Custom Proton Path (only visible when "Custom" is selected) -->
				<TextBlock Text="Custom Proton Path:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" Margin="0,10,10,0"
						   IsVisible="{Binding IsCustomProtonPathVisible}"/>
				<TextBox Grid.Row="2" Grid.Column="1" 
						 Text="{Binding LinuxProtonPath}" 
						 Watermark="/path/to/proton/executable"
						 HorizontalAlignment="Stretch"
						 Margin="0,10,5,0"
						 IsVisible="{Binding IsCustomProtonPathVisible}"/>
				<Button Grid.Row="2" Grid.Column="2" Content="Clear" 
						Command="{Binding ClearProtonPathCommand}"
						Padding="8,4" Margin="0,10,0,0"
						IsVisible="{Binding IsCustomProtonPathVisible}"/>
				
					<!-- Steam Root Override -->
					<TextBlock Text="Steam Root Override:" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" Margin="0,10,10,0"/>
					<TextBox Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2"
							 Text="{Binding LinuxSteamRootOverride}" 
							 Watermark="Leave empty for auto-detection"
							 HorizontalAlignment="Stretch"
							 Margin="0,10,0,0"/>
				
								<!-- Vulkan Driver Selection (only available drivers) -->
				<TextBlock Text="Vulkan Driver:" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" Margin="0,10,10,0"/>
				<ComboBox Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2"
						  ItemsSource="{Binding VulkanDriverOptions}"
						  SelectedItem="{Binding LinuxVulkanDriver}"
						  HorizontalAlignment="Stretch"
						  Margin="0,10,0,0"/>
				
					<!-- Proton Logging -->
					<CheckBox Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="3" Margin="0,15,0,0"
							  Content="Enable Proton Logging (PROTON_LOG=1)"
							  IsChecked="{Binding LinuxEnableProtonLog}"/>
					
					<!-- Launch Command Prefix -->
					<TextBlock Text="Launch Command Prefix:" Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="3" Margin="0,15,0,5" FontWeight="SemiBold"/>
					<TextBox Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="3"
							 Text="{Binding LinuxLaunchCommandPrefix}"
							 Watermark="gamescope -w 2560 -h 1440 --"
							 HorizontalAlignment="Stretch"
							 Margin="0,0,0,5"/>
					<TextBlock Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="3" 
							   Text="Command(s) to run before launching the game. Useful for gamescope, mangohud, etc."
							   FontSize="11" Opacity="0.7" Margin="0,0,0,10"/>
					
					<!-- Custom Environment Variables -->
					<TextBlock Text="Custom Environment Variables:" Grid.Row="9" Grid.Column="0" Grid.ColumnSpan="3" Margin="0,5,0,5" FontWeight="SemiBold"/>
					<TextBox Grid.Row="10" Grid.Column="0" Grid.ColumnSpan="3"
							 Text="{Binding LinuxCustomEnvironmentVariables}"
							 Watermark="VAR1=value1 VAR2=value2 (space-separated key=value pairs)"
							 AcceptsReturn="True"
							 TextWrapping="Wrap"
							 MinHeight="60"
							 HorizontalAlignment="Stretch"
							 Margin="0,0,0,5"/>
				</Grid>
			</Border>

			<Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10">
				<Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="Auto,*">
					<TextBlock Text="Advanced Settings" FontWeight="Bold" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,0,10"/>

					<CheckBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
							  Content="Open Console"
							  IsChecked="{Binding ConsoleEnabled}"/>

					<CheckBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,10,0,0"
							  Content="Disable Chromium"
							  IsChecked="{Binding DisableChromium}"/>
					<!-- Custom launch options textbox -->
					<StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,10,0,0">
						<Label Content="Custom Launch Options:" VerticalAlignment="Center" Target="{Binding ElementName=CustomLaunchOptionsTextBox}"/>
						<TextBox Margin="0,4,0,0"
								 x:Name="CustomLaunchOptionsTextBox"
								 Text="{Binding CustomLaunchOptions}"
								 Watermark="Custom Launch Options (e.g. -windowed -noborder)"
								 HorizontalAlignment="Stretch"/>
					</StackPanel>
					
				</Grid>
			</Border>
		</StackPanel>
	</ScrollViewer>
</UserControl>