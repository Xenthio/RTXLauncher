<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:RTXLauncher.Avalonia.ViewModels"
             x:Class="RTXLauncher.Avalonia.Views.SetupView"
             x:DataType="vm:SetupViewModel">

	<ScrollViewer>
		<StackPanel Spacing="15" Margin="20" HorizontalAlignment="Center" VerticalAlignment="Center" MaxWidth="600">

			<!-- ====================================================== -->
			<!-- WELCOME / FIRST-TIME INSTALL SCREEN                      -->
			<!-- ====================================================== -->
			<Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="20"
			        IsVisible="{Binding IsWelcomeVisible}">
				<StackPanel Spacing="15">
					<TextBlock Text="Welcome to the Garry's Mod RTX Launcher" FontSize="20" FontWeight="Bold" TextAlignment="Center" TextWrapping="Wrap"/>

					<!-- Pre-flight Warnings Area -->
					<ItemsControl ItemsSource="{Binding PreflightWarnings}"
					              IsVisible="{Binding ShowPreflightWarnings}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Border Background="#40FF0000" BorderBrush="Red" BorderThickness="1" CornerRadius="3" Padding="10" Margin="0,5">
									<TextBlock Text="{Binding}" TextWrapping="Wrap" Foreground="White"/>
								</Border>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>

					<TextBlock Text="This quick installer will automatically set up everything you need to play." TextWrapping="Wrap"/>

					<StackPanel Margin="20,5,0,5">
						<TextBlock Text="• Create a clean, separate copy of Garry's Mod."/>
						<TextBlock Text="• Download and install the latest recommended RTX Remix."/>
						<TextBlock Text="• Apply essential community fixes and patches."/>
						<TextBlock Text="• Configure optimal default settings."/>
					</StackPanel>

					<Button Content="Start Quick Install"
					        Command="{Binding RunInstallCommand}"
					        IsEnabled="{Binding !IsBusy}"
					        HorizontalAlignment="Stretch"
					        Classes="accent"
					        Padding="10"
					        FontSize="16"/>
				</StackPanel>
			</Border>

			<!-- ====================================================== -->
			<!-- INSTALLATION COMPLETED SCREEN                            -->
			<!-- ====================================================== -->
			<Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="20"
			        IsVisible="{Binding IsCompletedVisible}">
				<StackPanel Spacing="15">
					<TextBlock Text="Garry's Mod RTX is Installed!" FontSize="20" FontWeight="Bold" Foreground="LightGreen" TextAlignment="Center" TextWrapping="Wrap"/>
					<TextBlock Text="Your installation is ready. Here's what you can do now:" TextWrapping="Wrap" HorizontalAlignment="Center"/>

					<StackPanel Margin="20,5,0,5" HorizontalAlignment="Center">
						<TextBlock Text="• Use the 'Launch Game' button to play."/>
						<TextBlock Text="• Visit the 'Settings' tab to change resolution."/>
						<TextBlock Text="• Go to 'Mounting' to add content from other games."/>
					</StackPanel>

					<Separator Margin="0,10"/>

					<TextBlock Text="If you need to repair or update your installation, you can run the installer again." TextWrapping="Wrap" Opacity="0.7"/>

					<Button Content="Re-run Quick Install"
					        Command="{Binding RunInstallCommand}"
					        IsEnabled="{Binding !IsBusy}"
					        HorizontalAlignment="Stretch"/>
				</StackPanel>
			</Border>

		</StackPanel>
	</ScrollViewer>
</UserControl>